---
import Layout from "../layouts/Layout.astro";
import { glossary } from "../data/glossary";

// Group terms by first letter
const grouped = new Map<string, typeof glossary>();
for (const entry of glossary) {
  const letter = entry.term[0].toUpperCase();
  if (!grouped.has(letter)) grouped.set(letter, []);
  grouped.get(letter)!.push(entry);
}
const letters = [...grouped.keys()].sort();
---

<Layout title="Glossary" description="Plain-English definitions of political terms you'll see during the 2026 midterm elections.">
  <section class="max-w-3xl mx-auto py-16 px-4">
    <h1 class="text-3xl md:text-4xl font-bold mb-2">Glossary</h1>
    <p class="text-lg text-slate-500 mb-6">
      Political jargon, explained like you're a normal person.
    </p>

    <!-- Alphabetical jump-to -->
    <nav class="flex flex-wrap gap-1.5 mb-10" aria-label="Jump to letter">
      {letters.map((letter) => (
        <a
          href={`#letter-${letter}`}
          class="w-9 h-9 rounded-lg bg-slate-100 hover:bg-dem hover:text-white text-slate-600 font-bold text-sm flex items-center justify-center transition-colors"
        >
          {letter}
        </a>
      ))}
    </nav>

    <div class="space-y-10">
      {letters.map((letter) => (
        <div>
          <div id={`letter-${letter}`} class="scroll-mt-24 mb-4">
            <span class="text-2xl font-black text-navy">{letter}</span>
            <div class="border-b border-slate-200 mt-1" />
          </div>
          <div class="space-y-8">
            {grouped.get(letter)!.map((entry) => (
              <div id={entry.slug} class="scroll-mt-24">
                <h2 class="text-xl font-bold mb-1">{entry.term}</h2>
                <p class="text-sm font-medium text-tossup mb-2">{entry.short}</p>
                <p class="text-slate-600 leading-relaxed">{entry.long}</p>
              </div>
            ))}
          </div>
        </div>
      ))}
    </div>
  </section>
</Layout>
