---
import Layout from "../layouts/Layout.astro";
import WhosRunningView from "../components/ui/WhosRunningView";
import { fetchFecFilings } from "../lib/queries";

const senateFilings = await fetchFecFilings("S");
const houseFilings = await fetchFecFilings("H");
---

<Layout
  title="Who's Running in 2026?"
  description="See who has filed to run for U.S. Senate and House in 2026 and how much they've raised."
>
  <section class="max-w-5xl mx-auto py-12 px-4">
    <h1 class="text-3xl md:text-4xl font-bold mb-2">Who's Running?</h1>
    <p class="text-lg text-slate-500 mb-8">
      Federal candidates who have filed with the FEC and raised at least $5,000.
      States are listed by upcoming primary date.
    </p>

    {senateFilings.length > 0 || houseFilings.length > 0 ? (
      <WhosRunningView client:load senateFilings={senateFilings} houseFilings={houseFilings} />
    ) : (
      <div class="text-center py-16 text-slate-400">
        <p class="text-xl mb-2">No filings synced yet.</p>
        <p class="text-sm">FEC filing data will appear here as it's imported by our team.</p>
      </div>
    )}
  </section>
</Layout>
