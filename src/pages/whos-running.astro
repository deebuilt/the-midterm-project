---
import Layout from "../layouts/Layout.astro";
import WhosRunningView from "../components/ui/WhosRunningView";
import { fetchRaceCandidates } from "../lib/queries";

const racesByState = await fetchRaceCandidates();
---

<Layout
  title="Who's Running in 2026?"
  description="See who's running for U.S. Senate and House in 2026, with fundraising data and race ratings."
>
  <section class="max-w-5xl mx-auto py-12 px-4">
    <h1 class="text-3xl md:text-4xl font-bold mb-2">Who's Running?</h1>
    <p class="text-lg text-slate-500 mb-8">
      Candidates who've officially entered competitive races for 2026.
      Fundraising data from the FEC. States are listed by upcoming primary date.
    </p>

    {racesByState.length > 0 ? (
      <WhosRunningView client:load racesByState={racesByState} />
    ) : (
      <div class="text-center py-16 text-slate-400">
        <p class="text-xl mb-2">No candidates yet.</p>
        <p class="text-sm">Check back after candidates have been added to tracked races.</p>
      </div>
    )}
  </section>
</Layout>
